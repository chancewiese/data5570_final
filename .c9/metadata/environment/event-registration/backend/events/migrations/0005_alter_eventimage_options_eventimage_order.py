{"filter":false,"title":"0005_alter_eventimage_options_eventimage_order.py","tooltip":"/event-registration/backend/events/migrations/0005_alter_eventimage_options_eventimage_order.py","undoManager":{"mark":6,"position":6,"stack":[[{"start":{"row":3,"column":0},"end":{"row":4,"column":0},"action":"insert","lines":["",""],"id":2}],[{"start":{"row":4,"column":0},"end":{"row":9,"column":24},"action":"insert","lines":["def set_initial_order(apps, schema_editor):","    EventImage = apps.get_model('events', 'EventImage')","    for event in apps.get_model('events', 'Event').objects.all():","        for i, image in enumerate(event.images.all()):","            image.order = i","            image.save()"],"id":3}],[{"start":{"row":2,"column":0},"end":{"row":27,"column":5},"action":"remove","lines":["from django.db import migrations, models","","def set_initial_order(apps, schema_editor):","    EventImage = apps.get_model('events', 'EventImage')","    for event in apps.get_model('events', 'Event').objects.all():","        for i, image in enumerate(event.images.all()):","            image.order = i","            image.save()","","class Migration(migrations.Migration):","","    dependencies = [","        ('events', '0004_eventimage'),","    ]","","    operations = [","        migrations.AlterModelOptions(","            name='eventimage',","            options={'ordering': ['order', '-uploaded_at']},","        ),","        migrations.AddField(","            model_name='eventimage',","            name='order',","            field=models.IntegerField(default=0),","        ),","    ]"],"id":4},{"start":{"row":2,"column":0},"end":{"row":19,"column":5},"action":"insert","lines":["from django.db import migrations","","def set_image_orders(apps, schema_editor):","    Event = apps.get_model('events', 'Event')","    for event in Event.objects.all():","        for i, image in enumerate(event.images.all()):","            image.order = i","            image.save()","","class Migration(migrations.Migration):","","    dependencies = [","        ('events', 'previous_migration'),  # Replace with your actual previous migration","    ]","","    operations = [","        migrations.RunPython(set_image_orders),","    ]"]}],[{"start":{"row":0,"column":47},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":5},{"start":{"row":1,"column":0},"end":{"row":1,"column":1},"action":"insert","lines":["#"]}],[{"start":{"row":1,"column":1},"end":{"row":1,"column":50},"action":"insert","lines":["0005_alter_eventimage_options_eventimage_order.py"],"id":6}],[{"start":{"row":1,"column":1},"end":{"row":1,"column":2},"action":"insert","lines":[" "],"id":7}],[{"start":{"row":3,"column":0},"end":{"row":21,"column":0},"action":"remove","lines":["from django.db import migrations","","def set_image_orders(apps, schema_editor):","    Event = apps.get_model('events', 'Event')","    for event in Event.objects.all():","        for i, image in enumerate(event.images.all()):","            image.order = i","            image.save()","","class Migration(migrations.Migration):","","    dependencies = [","        ('events', 'previous_migration'),  # Replace with your actual previous migration","    ]","","    operations = [","        migrations.RunPython(set_image_orders),","    ]",""],"id":8},{"start":{"row":3,"column":0},"end":{"row":32,"column":5},"action":"insert","lines":["from django.db import migrations, models","","def set_image_orders(apps, schema_editor):","    Event = apps.get_model('events', 'Event')","    for event in Event.objects.all():","        for i, image in enumerate(event.images.all()):","            image.order = i","            image.save()","","def reverse_image_orders(apps, schema_editor):","    EventImage = apps.get_model('events', 'EventImage')","    EventImage.objects.all().update(order=0)","","class Migration(migrations.Migration):","    dependencies = [","        ('events', '0004_eventimage'),  # Update this to your actual previous migration","    ]","","    operations = [","        migrations.AlterModelOptions(","            name='eventimage',","            options={'ordering': ['order', '-uploaded_at']},","        ),","        migrations.AddField(","            model_name='eventimage',","            name='order',","            field=models.IntegerField(default=0),","        ),","        migrations.RunPython(set_image_orders, reverse_image_orders),","    ]"]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":32,"column":5},"end":{"row":32,"column":5},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":257,"mode":"ace/mode/python"}},"timestamp":1733443011866,"hash":"ab9515b90c8dca39814bdd4507fc79f6ae1a4b10"}